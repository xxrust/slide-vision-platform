<Window x:Class="WpfApp2.UI.ImageTestModeSelectionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="图片测试模式选择" 
        Height="600" 
        Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        WindowStyle="SingleBorderWindow">

    <Window.Resources>
        <!-- 按钮样式 -->
        <Style x:Key="ModernButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#FF4472C4"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                BorderBrush="{TemplateBinding BorderBrush}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF5B85D6"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#FF365F9C"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- 取消按钮样式 -->
        <Style x:Key="CancelButtonStyle" TargetType="Button" BasedOn="{StaticResource ModernButtonStyle}">
            <Setter Property="Background" Value="#FF6C757D"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#FF7A868E"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#FF5A6268"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- 输入框样式 -->
        <Style x:Key="ModernTextBoxStyle" TargetType="TextBox">
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="BorderBrush" Value="#FFCCCCCC"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3">
                            <ScrollViewer x:Name="PART_ContentHost"
                                        Margin="{TemplateBinding Padding}"
                                        VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter Property="BorderBrush" Value="#FF4472C4"/>
                                <Setter Property="BorderThickness" Value="2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题 -->
        <TextBlock Grid.Row="0" 
                   Text="选择图片测试模式" 
                   FontSize="18" 
                   FontWeight="Bold" 
                   HorizontalAlignment="Center" 
                   Margin="0,0,0,20"
                   Foreground="#FF2E3440"/>

        <!-- 主要内容滚动区域 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel>
                <!-- 传统测试模式 -->
                <GroupBox Header="传统测试模式" Margin="0,0,0,15" Padding="10">
                    <StackPanel>
                        <!-- 按类别查找选项 -->
                        <RadioButton x:Name="CategoryModeRadio"
                                     Content="按类别查找"
                                     FontSize="14"
                                     Margin="0,5"
                                     IsChecked="True"
                                     GroupName="TestMode"/>

                        <TextBlock Text="从文件夹中选择图片进行测试（原有功能）"
                                   FontSize="12"
                                   Foreground="#FF6C757D"
                                   Margin="25,0,0,15"/>

                        <!-- 按NG编号查找选项 -->
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <RadioButton x:Name="NGNumberModeRadio"
                                         Content="按NG编号查找"
                                         FontSize="14"
                                         VerticalAlignment="Center"
                                         GroupName="TestMode"/>

                            <TextBlock Text="数量:" 
                                       FontSize="12" 
                                       VerticalAlignment="Center" 
                                       Margin="20,0,5,0"/>
                            
                            <TextBox x:Name="NGCountTextBox"
                                     Width="80"
                                     Height="28"
                                     VerticalAlignment="Center"
                                     Text="0"
                                     TextAlignment="Center"
                                     IsEnabled="True"
                                     IsReadOnly="False"
                                     FontSize="12"
                                     Foreground="Black"
                                     Background="White"
                                     BorderBrush="#FFCCCCCC"
                                     BorderThickness="1"
                                     Padding="8,6"/>
                            
                            <Button x:Name="RefreshCountButton"
                                    Content="刷新"
                                    Width="40"
                                    Height="28"
                                    FontSize="10"
                                    Margin="5,0,0,0"
                                    Click="RefreshCountButton_Click"/>
                            
                            <TextBlock Text="张" 
                                       FontSize="12" 
                                       VerticalAlignment="Center" 
                                       Margin="5,0,0,0"/>
                        </StackPanel>

                        <StackPanel Margin="25,5,0,0">
                            <TextBlock Text="自动查找当前LOT的NG图片，按编号从大到小排序测试"
                                       FontSize="12"
                                       Foreground="#FF6C757D"
                                       TextWrapping="Wrap"/>
                            
                            <TextBlock x:Name="NGInfoTextBlock"
                                       Text="检查当前LOT的NG图片数量..."
                                       FontSize="11"
                                       Foreground="#FF999999"
                                       Margin="0,5,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>

                <!-- 专业测试模式 -->
                <GroupBox Header="专业测试模式" Margin="0,0,0,15" Padding="10">
                    <StackPanel>
                        <!-- 检测类模式 -->
                        <TextBlock Text="检测类模式" FontWeight="Bold" FontSize="13" Margin="0,0,0,10" Foreground="#FF2E3440"/>
                        
                        <RadioButton x:Name="ValidatorMachineDetectionRadio"
                                     Content="验机图片检测"
                                     FontSize="14"
                                     Margin="0,5"
                                     GroupName="TestMode"/>

                        <TextBlock Text="选择验机图片集进行检测，可自动mark测试结果"
                                   FontSize="12"
                                   Foreground="#FF6C757D"
                                   Margin="25,0,0,10"/>

                        <RadioButton x:Name="SingleSampleDynamicStaticDetectionRadio"
                                     Content="单片动态/静态测试"
                                     FontSize="14"
                                     Margin="0,5"
                                     GroupName="TestMode"/>

                        <TextBlock Text="选择单片动态/静态图片集进行检测（实体=1，不分组），数据分析与验机图片检测一致"
                                   FontSize="12"
                                   Foreground="#FF6C757D"
                                   Margin="25,0,0,15"/>

                        <RadioButton x:Name="CicdImageSetTestRadio"
                                     Content="CICD图片集测试"
                                     FontSize="14"
                                     Margin="0,5"
                                     GroupName="TestMode"/>

                        <TextBlock Text="选择已生成的CICD图片集进行自动测试，并与基准结果进行对比"
                                   FontSize="12"
                                   Foreground="#FF6C757D"
                                   Margin="25,0,0,15"/>

                        <!-- 图集制作类模式 -->
                        <TextBlock Text="图集制作类模式" FontWeight="Bold" FontSize="13" Margin="0,0,0,10" Foreground="#FF2E3440"/>
                        
                        <RadioButton x:Name="ValidatorMachineCollectionRadio"
                                     Content="验机图片集制作"
                                     FontSize="14"
                                     Margin="0,5"
                                     GroupName="TestMode"/>

                        <TextBlock Text="选择文件夹和巡回周期，按样本分组保存图片到模板的验机目录"
                                   FontSize="12"
                                   Foreground="#FF6C757D"
                                   Margin="25,0,0,10"/>

                        <RadioButton x:Name="SingleSampleDynamicStaticCollectionRadio"
                                     Content="单片动态/静态测试集制作"
                                     FontSize="14"
                                     Margin="0,5"
                                     GroupName="TestMode"/>

                        <TextBlock Text="选择一个文件夹作为图片集（默认同一样本在不同时刻采集），保存到模板目录供单片动态/静态测试使用"
                                   FontSize="12"
                                   Foreground="#FF6C757D"
                                   Margin="25,0,0,0"/>

                        <RadioButton x:Name="CicdImageSetCollectionRadio"
                                     Content="CICD图片集制作"
                                     FontSize="14"
                                     Margin="0,15,0,5"
                                     GroupName="TestMode"/>

                        <TextBlock Text="添加多个文件夹作为图片组，自动配对图片并进行测试，生成cicd_refer.csv供后续对比"
                                   FontSize="12"
                                   Foreground="#FF6C757D"
                                   Margin="25,0,0,0"/>
                    </StackPanel>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>

        <!-- 状态信息区域 -->
        <StackPanel Grid.Row="2" x:Name="StatusPanel" Margin="0,10,0,0" Visibility="Collapsed">
            <TextBlock x:Name="StatusTextBlock"
                       Text=""
                       FontSize="12"
                       Foreground="#FF666666"
                       TextWrapping="Wrap"/>
        </StackPanel>

        <!-- 按钮区域 -->
        <StackPanel Grid.Row="3" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Margin="0,20,0,0">

            <Button Content="确定" 
                    Width="80" 
                    Height="35"
                    Style="{StaticResource ModernButtonStyle}"
                    Click="ConfirmButton_Click"
                    Margin="0,0,10,0"/>

            <Button Content="取消" 
                    Width="80" 
                    Height="35"
                    Style="{StaticResource CancelButtonStyle}"
                    Click="CancelButton_Click"/>
        </StackPanel>
    </Grid>
</Window> 
