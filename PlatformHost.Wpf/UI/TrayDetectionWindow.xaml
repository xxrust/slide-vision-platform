<Window x:Class="WpfApp2.UI.TrayDetectionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:WpfApp2.UI.Controls"
        Title="Tray 检测界面"
        Width="1200"
        Height="820"
        Background="#FF2C3E50"
        WindowStartupLocation="CenterOwner">
    <Window.Resources>
        <Style x:Key="TopBarButton" TargetType="Button">
            <Setter Property="Height" Value="30"/>
            <Setter Property="Margin" Value="3,0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Padding" Value="6,0"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value="0.9"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="TopBarToggle" TargetType="ToggleButton">
            <Setter Property="Height" Value="30"/>
            <Setter Property="Margin" Value="3,0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Padding" Value="6,0"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value="0.9"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="60"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="30"/>
        </Grid.RowDefinitions>

        <!-- 顶部导航栏 -->
        <Border Grid.Row="0" Background="#FF34495E" BorderThickness="0,0,0,1" BorderBrush="#FF5D6D7E">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0" x:Name="CloseButton" Content="← 返回" Width="80" Height="40"
                        Margin="10,0" Background="#FF3498DB" BorderThickness="0" Foreground="White"
                        FontSize="14" Click="CloseButton_Click">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#FF5DADE2"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0">
                    <TextBlock x:Name="TitleText" Text="托盘检测" FontSize="20" FontWeight="Bold"
                               Foreground="White" VerticalAlignment="Center"/>
                    <Border Background="#FF3498DB" CornerRadius="3" Margin="15,0,0,0" Padding="8,3">
                        <TextBlock x:Name="TrayInfoText" Text="批次: - | 10x9"
                                   FontSize="12" Foreground="White"/>
                    </Border>
                </StackPanel>

                <WrapPanel Grid.Column="2" VerticalAlignment="Center" Margin="10,0" Visibility="Collapsed">
                    <TextBlock Text="行" Foreground="White" Margin="0,0,4,0" VerticalAlignment="Center"/>
                    <TextBox x:Name="RowsBox" Width="50" Margin="0,0,8,0" Foreground="White"
                             Background="#FF2C3E50" BorderBrush="#FF5D6D7E" BorderThickness="1"/>
                    <TextBlock Text="列" Foreground="White" Margin="0,0,4,0" VerticalAlignment="Center"/>
                    <TextBox x:Name="ColsBox" Width="50" Margin="0,0,8,0" Foreground="White"
                             Background="#FF2C3E50" BorderBrush="#FF5D6D7E" BorderThickness="1"/>
                    <TextBlock Text="批次" Foreground="White" Margin="0,0,4,0" VerticalAlignment="Center"/>
                    <TextBox x:Name="BatchBox" Width="140" Margin="0,0,8,0" Foreground="White"
                             Background="#FF2C3E50" BorderBrush="#FF5D6D7E" BorderThickness="1"/>
                    <TextBlock Text="图标" Foreground="White" Margin="0,0,4,0" VerticalAlignment="Center"/>
                    <TextBox x:Name="IconFolderBox" Width="180" Margin="0,0,6,0" Foreground="White"
                             Background="#FF2C3E50" BorderBrush="#FF5D6D7E" BorderThickness="1"/>
                    <Button x:Name="BrowseIconButton" Content="浏览" Width="60" Height="26" Margin="0,0,10,0"
                            Background="#FF17A2B8" Style="{StaticResource TopBarButton}"
                            Click="BrowseIconButton_Click"/>
                </WrapPanel>

                <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0">
                    <ToggleButton x:Name="RotateToggle" Width="70" Height="30" Margin="3,0"
                                  Background="#FFF39C12" Style="{StaticResource TopBarToggle}"
                                  Checked="RotateCheck_Changed" Unchecked="RotateCheck_Changed">
                        <TextBlock x:Name="RotateToggleText" Text="旋转90°" FontSize="10"/>
                    </ToggleButton>
                    <ToggleButton x:Name="ShowOkToggle" Width="70" Height="30" Margin="3,0"
                                  Background="#FF27AE60" Style="{StaticResource TopBarToggle}"
                                  IsChecked="True" Checked="ShowOkCheck_Changed" Unchecked="ShowOkCheck_Changed">
                        <TextBlock x:Name="ShowOkToggleText" Text="良品显示" FontSize="10"/>
                    </ToggleButton>
                    <Button x:Name="NgBrowserButton" Width="70" Height="30" Margin="3,0"
                            Background="#FF3498DB" Style="{StaticResource TopBarButton}"
                            Content="NG浏览" Click="NgBrowserButton_Click"/>
                    <Button x:Name="HelpButton" Width="60" Height="30" Margin="3,0"
                            Background="#FF5D6D7E" Style="{StaticResource TopBarButton}"
                            Content="说明" Click="HelpButton_Click"/>
                </StackPanel>

                <StackPanel Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0">
                    <Border Background="#FF2C3E50" CornerRadius="5" Padding="12,4" Margin="3,0">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="总: " FontSize="12" Foreground="LightGray"/>
                            <TextBlock x:Name="TotalCountText" Text="0" FontSize="12"
                                       Foreground="White" FontWeight="Bold"/>
                        </StackPanel>
                    </Border>
                    <Border Background="#FF27AE60" CornerRadius="5" Padding="12,4" Margin="3,0">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="良: " FontSize="12" Foreground="White"/>
                            <TextBlock x:Name="OKCountText" Text="0" FontSize="12"
                                       Foreground="White" FontWeight="Bold"/>
                        </StackPanel>
                    </Border>
                    <Border Background="#FFE74C3C" CornerRadius="5" Padding="12,4" Margin="3,0">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="不良: " FontSize="12" Foreground="White"/>
                            <TextBlock x:Name="NGCountText" Text="0" FontSize="12"
                                       Foreground="White" FontWeight="Bold"/>
                        </StackPanel>
                    </Border>
                    <Border Background="#FF3498DB" CornerRadius="5" Padding="12,4" Margin="3,0">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="率: " FontSize="12" Foreground="White"/>
                            <TextBlock x:Name="YieldRateText" Text="0%" FontSize="12"
                                       Foreground="White" FontWeight="Bold"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>

        <!-- 托盘显示区域 -->
        <Border Grid.Row="1" Background="#FF34495E" Margin="5" CornerRadius="5">
            <controls:TrayGridControl x:Name="TrayGrid" Margin="10"/>
        </Border>

        <!-- 状态栏 -->
        <Border Grid.Row="2" Background="#FF34495E" BorderThickness="0,1,0,0" BorderBrush="#FF5D6D7E">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" x:Name="StatusText" Text="就绪" FontSize="12"
                           Foreground="LightGray" VerticalAlignment="Center" Margin="10,0"/>
                <TextBlock Grid.Column="1" x:Name="TimestampText" Text="" FontSize="12"
                           Foreground="LightGray" VerticalAlignment="Center" Margin="10,0"/>
            </Grid>
        </Border>
    </Grid>
</Window>
